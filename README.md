# UPShark скрипт

**UPShark** Скрипт для опросы ИБП фирмы Eaton

Работает при помощи BeautifulSoup, Requests.

## Принцып работы 

 - Из Json файла берется имя и адрес до ИБП Eaton;
 - Происходит иттерация каждого элемента словаря из Json файла;
 - При помощи Requests получается HTM-документ с ИБП по адресу *ipaddres:**port**/ups_propAlarms.htm*;
    > Если подключится к ИБП не удалось выдается ошибка "!ERROR Connection timed out"
 - Далее HTM документ парсится в функции **checkError_Eaton()** на наличие HTML-тэга с классом listline1, в котором находятся информация об ошибках;
    > В тэге с классом listline0 находится шапка таблицы, возможно есть классы выше listline1,
        но программа проверяет только listline1  (т.к. по логике другие тэги уже не нужны - на ИБП уже есть аварии.)
 - Далее в пустой список добавляются вся информация из искомого тэга и их кол-во
 - Если длинна списка больше 0 выдается статус "!!! UPS Alarm: CHECK UPS !!!", а если 0 "Status OK"
 
> Приемуществом является то, что происходит загрузка легковесного HTM документа по прямому его адресу. 

Структура Json-файла. На даннный момент структура Json файла выглядит так:

   {"eaton":{"Какой-то ИБП" : "192.168.0.1:1234"}, {След элемент}}